<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="shortcut icon" href="../images/bitbug_favicon.ico" />
    <link rel="stylesheet" type="text/css" href="../css/iconfont.css">
    <link rel="stylesheet" href="../css/register.css">
    <title>注册页</title>
</head>
<body>
    <!-- header部分 -->
    <header>
        <div class="header">
            <img src="../images/logo.gif" alt="">
            <p>如已注册 , 点此 <a href="../html/login.html"> 登录</a></p>
        </div>
    </header>
    
    <!--registers-->
    <div class="registers">
        <div class="registers_top">
            <h3>新用户注册</h3>
        </div>
        <div class="registers_main">
            <ul>
                <li class="input01">
                    <input type="text" id="textId"/>
                    <span>用户名</span>
                    <p>×</p>
                </li>
                <li class="input02">
                	<p>用户名长度不能少于 3 个字符。</p>
                </li>
                <li class="input01">
                    <input type="text" id="emailId"/>
                    <span>email</span>
                    <p>×</p>
                </li>
                <li class="input02">
                	<p>邮件地址不能为空</p>
                </li>
                <li class="input01">
                    <input type="password" id="password01"/>
                    <span>密码</span>
                    <p>×</p>
                </li>
                <li class="input02">
                	<p>登录密码不能少于 6 个字符。</p>
                </li>
                <li class="input01">
                    <input type="password" id="password02"/>
                    <span>确认密码</span>
                    <p>×</p>
                </li>
                <li class="input02">
                	<p>登录密码不能少于 6 个字符。</p>
                </li>
                <select>
                	<option value="请选择密码提示问题">请选择密码提示问题</option>
                	<option value="我最好朋友的生日">我最好朋友的生日？</option>
                	<option value="我儿时的居住地址是">我儿时的居住地址是？</option>
                	<option value="我的座右铭">我的座右铭？</option>
                	<option value="">我最好朋友的生日</option>
                	<option value="">我儿时的居住地址是？</option>
                	<option value="">我的座右铭？</option>
                	<option value="">我儿时的居住地址是？</option>
                	<option value="">我的座右铭？</option>
                </select>
                <li class="input02">
                	<p></p>
                </li>
                <li class="input01">
                    <input type="text" id="question" />
                    <span>密码问题答案</span>
                </li>
                <li class="input02">
                	<p>登录密码不能少于 6 个字符。</p>
                </li>
                <div class="yanzm">
	                <li class="input01 input06">
	                    <input type="text"/>
	                    <span>验证码</span>
	                </li>
	                <li class="input01 input06">
	                    <img src="../images/suiji.jpg" alt="" width="100%" />
	                </li>
                </div><br><br><br><br>
                <div class="xieyi">
                	<input type="checkbox" class="input07"/>
                	<p>我已看过并接受《<a href="">我接受</a>》</p>
                </div><br>
                <li class="input01 button">
                    <button id="btn">同意协议并注册</button>
                </li>
                <br />
                <br />
                <span>使用第三方账号登录</span>
                <br />
                <br />
                <div class="disanfang">
                	<img src="../images/qq.jpg" alt="" />
                	<img src="../images/wb.jpg" alt="" />
                </div>
                <br/>
            </ul>
        </div>
    </div>
</body>
</html>
<script src="../js/jquery-1.8.3.min.js"></script>
<script src="../js/jquery.SuperSlide.2.1.1.source.js"></script>
<script>
	
$(function(){
	
	// 验证是否都验证正确
	var k1 = false;
	var k2 = false;
	var k3 = false;
	var k4 = false;
	
	$("input").focus(
		function(){
			$(this).parent(".input01").find("span").css({
				display:"none"
			})
		}
	);
	
	$("#textId").blur(
		function(){
			let a = $(this).val();
			console.log(a);
			if(a.length<=0){
				$(this).parent(".input01").find("p").show();
				$(this).parent(".input01").next(".input02").find("p").show();
				$(this).parent(".input01").css({border:"1px solid #fe564b"})
			}else{
				let reg = /^[\S](\S)+[\S]$/;
				if(!reg.test(a)){
					$(this).parent(".input01").find("p").show();
					$(this).parent(".input01").next(".input02").find("p").show();
					$(this).parent(".input01").css({border:"1px solid #fe564b"})
				}else{
					$(this).parent(".input01").find("p").show();
					$(this).parent(".input01").find("p").html("");
					$(this).parent(".input01").find("p").html("√");
					$(this).parent(".input01").find("p").css({color:"#fff",backgroundColor:"green"});
					$(this).parent(".input01").next(".input02").find("p").css({display:"none"})
					$(this).parent(".input01").css({border:"1px solid #cccccc"})
					k1 = true;
				}
			}
//			let str = "username="+$('#textId').val()+"&password="+$('#password01').val();
//			$.ajax({
//				type:"post",
//				url:"../php/login.php",
//              Async:true,
//              data:str,
//              success:function(data){
//              	console.log(data)
//              	console.log($('#textId').val())
//                  //5.响应
//                  if(data == 1){
//                    	alert("该用户已被注册，请重新注册！");
//                  }else{
////                  	alert("可以注册！");
////                  	location.href="http://localhost/floweritem/html/login.html";
//                  }
//              },
//			})
		}
	);
	$("#textId").keyup(
		function(){
			let a = $(this).val();
			let reg = /^[\S](\S)+[\S]$/;
			if(!reg.test(a)){
				$(this).parent(".input01").find("p").show();
				$(this).parent(".input01").next(".input02").find("p").show();
				$(this).parent(".input01").css({border:"1px solid #fe564b"})
			}else{
				$(this).parent(".input01").find("p").show();
				$(this).parent(".input01").find("p").html("");
				$(this).parent(".input01").find("p").html("√");
				$(this).parent(".input01").find("p").css({color:"#fff",backgroundColor:"green"});
				$(this).parent(".input01").next(".input02").find("p").css({display:"none"})
				$(this).parent(".input01").css({border:"1px solid #cccccc"})
			}
		}
	);

	$("#emailId").blur(
		function(){
			let a = $(this).val();
			if(a.length<=0){
				$(this).parent(".input01").find("p").show();
				$(this).parent(".input01").next(".input02").find("p").show();
				$(this).parent(".input01").css({border:"1px solid #fe564b"})
			}else{
				let reg = /^([\w]+)(@)([\w]+)(\.)([a-z]{2,3})(\.[a-z]{2,3})?/gi;
				if(!reg.test(a)){
				$(this).parent(".input01").find("p").show();
				$(this).parent(".input01").next(".input02").find("p").show();
				$(this).parent(".input01").next(".input02").find("p").html("");
				$(this).parent(".input01").next(".input02").find("p").html("邮件地址不合法");
				$(this).parent(".input01").css({border:"1px solid #fe564b"})
				}else{
					console.log(1111111)
				$(this).parent(".input01").find("p").show();
					$(this).parent(".input01").find("p").html("");
					$(this).parent(".input01").find("p").html("√");
					$(this).parent(".input01").find("p").css({color:"#fff",backgroundColor:"green"});
					$(this).parent(".input01").next(".input02").find("p").css({display:"none"})
					$(this).parent(".input01").css({border:"1px solid #cccccc"})
					k2 = true;
				}
			}
		}
	);
	$("#emailId").keyup(
		function(){
			let a = $(this).val();
			let reg = /^([\w]+)(@)([\w]+)(\.)([a-z]{2,3})(\.[a-z]{2,3})?/gi;
			if(!reg.test(a)){
				$(this).parent(".input01").find("p").show();
				$(this).parent(".input01").next(".input02").find("p").show();
				$(this).parent(".input01").next(".input02").find("p").html("");
				$(this).parent(".input01").next(".input02").find("p").html("邮件地址不合法");
				$(this).parent(".input01").css({border:"1px solid #fe564b"})
			}else{
				$(this).parent(".input01").find("p").show();
				$(this).parent(".input01").find("p").html("");
				$(this).parent(".input01").find("p").html("√");
				$(this).parent(".input01").find("p").css({color:"#fff",backgroundColor:"green"});
				$(this).parent(".input01").next(".input02").find("p").css({display:"none"})
				$(this).parent(".input01").css({border:"1px solid #cccccc"})
			}
		}
	);


	$("#password01").blur(
		function(){
			let a = $(this).val();
			if(a.length<=0){
				$(this).parent(".input01").find("p").show();
				$(this).parent(".input01").next(".input02").find("p").show();
				$(this).parent(".input01").css({border:"1px solid #fe564b"})
			}else{
				let reg = /(\w){5}(\w){1,11}/gi;
				if(!reg.test(a)){
					$(this).parent(".input01").find("p").show();
					$(this).parent(".input01").next(".input02").find("p").show();
					$(this).parent(".input01").next(".input02").find("p").html("登录密码不能少于 6 个字符。");
					$(this).parent(".input01").css({border:"1px solid #fe564b"})
				}else{
					$(this).parent(".input01").find("p").show();
					$(this).parent(".input01").find("p").html("√");
					$(this).parent(".input01").find("p").css({color:"#fff",backgroundColor:"green"});
					$(this).parent(".input01").next(".input02").find("p").css({display:"none"})
					$(this).parent(".input01").css({border:"1px solid #cccccc"})
					k3 = true;
				}
			}
		}
	);
	$("#password01").keyup(
		function(){
			let a = $(this).val();
			let reg = /(\w){5}(\w){1,11}/gi;
			if(!reg.test(a)){
				$(this).parent(".input01").find("p").show();
				$(this).parent(".input01").next(".input02").find("p").show();
				$(this).parent(".input01").next(".input02").find("p").html("登录密码不能少于 6 个字符。");
				$(this).parent(".input01").css({border:"1px solid #fe564b"})
			}else{
				$(this).parent(".input01").find("p").show();
				$(this).parent(".input01").find("p").html("√");
				$(this).parent(".input01").find("p").css({color:"#fff",backgroundColor:"green"});
				$(this).parent(".input01").next(".input02").find("p").css({display:"none"})
				$(this).parent(".input01").css({border:"1px solid #cccccc"})
			}
		}
	);


	$("#password02").blur(
		function(){
			let a = $(this).val();
			if(a.length<=0){
				$(this).parent(".input01").find("p").show();
				$(this).parent(".input01").next(".input02").find("p").show();
				$(this).parent(".input01").css({border:"1px solid #fe564b"})
			}else{
				let b = $("#password01").val();
				if(a!=b){
					$(this).parent(".input01").find("p").show();
					$(this).parent(".input01").next(".input02").find("p").show();
					$(this).parent(".input01").next(".input02").find("p").html("两次输入密码不一致。");
					$(this).parent(".input01").css({border:"1px solid #fe564b"})
				}else{
					$(this).parent(".input01").find("p").show();
					$(this).parent(".input01").find("p").html("√");
					$(this).parent(".input01").find("p").css({color:"#fff",backgroundColor:"green"});
					$(this).parent(".input01").next(".input02").find("p").css({display:"none"})
					$(this).parent(".input01").css({border:"1px solid #cccccc"})
					k4 = true;
				}
			}
		}
	);
	$("#password02").keyup(
		function(){
			let a = $(this).val();
			let b = $("#password01").val();
			if(a!=b){
				$(this).parent(".input01").find("p").show();
				$(this).parent(".input01").next(".input02").find("p").show();
				$(this).parent(".input01").next(".input02").find("p").html("两次输入密码不一致。");
				$(this).parent(".input01").css({border:"1px solid #fe564b"})
			}else{
				$(this).parent(".input01").find("p").show();
				$(this).parent(".input01").find("p").html("√");
				$(this).parent(".input01").find("p").css({color:"#fff",backgroundColor:"green"});
				$(this).parent(".input01").next(".input02").find("p").css({display:"none"})
				$(this).parent(".input01").css({border:"1px solid #cccccc"})
			}
		}
	);
	 
	$("#btn").click(
		function(){
			if( k1 && k2 && k3 && k4 ){
				console.log(123)
				let str = "username="+$('#textId').val()+"&password="+$('#password01').val();
				$.ajax({
					type:"post",
					url:"../php/regSave.php",
                    Async:true,
                    data:str,
                    success:function(data){
                        //5.响应
                        if(data==1){
                          	alert("用户注册成功！");
                                location.href="http://localhost/floweritem/html/login.html";
                        }
                        else if(data==0){
                            alert("用户已存在,请重新注册！");
                        }
                        else{
                        	alert("服务器出错");
                        }
                    },
				})
			}
		}
	);



})

</script>
